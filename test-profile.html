<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste de Perfil - TECHTRAIN</title>
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <div class="row">
            <div class="col-12">
                <h1>Teste de Funcionalidades de Perfil</h1>
                <p>Esta página testa as funcionalidades de perfil implementadas.</p>
                
                <div id="testResults">
                    <h3>Resultados dos Testes:</h3>
                    <div id="results"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Custom JS -->
    <script src="js/dataManager.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const resultsDiv = document.getElementById('results');
            
            // Initialize data manager
            dataManager.init().then(() => {
                // Test 1: Check if dataManager is loaded
                resultsDiv.innerHTML += '<p>✓ dataManager carregado com sucesso</p>';
                
                // Test 2: Test register functionality
                try {
                    const registerResult = dataManager.register('Test User', 'test@example.com', 'test123');
                    resultsDiv.innerHTML += `<p>✓ Registro de usuário: ${registerResult ? 'Sucesso' : 'Falhou (usuário pode já existir)'}</p>`;
                } catch (error) {
                    resultsDiv.innerHTML += `<p>✗ Erro no registro: ${error.message}</p>`;
                }
                
                // Test 3: Test login functionality
                try {
                    const loginResult = dataManager.login('test@example.com', 'test123');
                    resultsDiv.innerHTML += `<p>✓ Login: ${loginResult ? 'Sucesso' : 'Falhou'}</p>`;
                } catch (error) {
                    resultsDiv.innerHTML += `<p>✗ Erro no login: ${error.message}</p>`;
                }
                
                // Test 4: Test profile update functionality
                if (dataManager.isLoggedIn()) {
                    try {
                        const updateResult = dataManager.updateProfile('Test User Updated', 'testupdated@example.com');
                        resultsDiv.innerHTML += `<p>✓ Atualização de perfil: ${updateResult ? 'Sucesso' : 'Falhou'}</p>`;
                    } catch (error) {
                        resultsDiv.innerHTML += `<p>✗ Erro na atualização de perfil: ${error.message}</p>`;
                    }
                    
                    // Test 5: Test password update functionality
                    try {
                        const passwordResult = dataManager.updatePassword('test123', 'newpassword123');
                        resultsDiv.innerHTML += `<p>✓ Alteração de senha: ${passwordResult ? 'Sucesso' : 'Falhou (senha atual incorreta)'}</p>`;
                    } catch (error) {
                        resultsDiv.innerHTML += `<p>✗ Erro na alteração de senha: ${error.message}</p>`;
                    }
                    
                    // Test 6: Test logout functionality
                    try {
                        const logoutResult = dataManager.logout();
                        resultsDiv.innerHTML += `<p>✓ Logout: ${logoutResult ? 'Sucesso' : 'Falhou'}</p>`;
                    } catch (error) {
                        resultsDiv.innerHTML += `<p>✗ Erro no logout: ${error.message}</p>`;
                    }
                } else {
                    resultsDiv.innerHTML += '<p>✗ Usuário não está logado, não é possível testar atualização de perfil e senha</p>';
                }
                
                resultsDiv.innerHTML += '<p><strong>Todos os testes concluídos!</strong></p>';
            });
        });
    </script>
</body>
</html>